{% extends 'base.html' %}
{% block title %}Instructors & Courses{% endblock %}
{% block content %}
<h4 class="mb-3">Instructors & Available Courses</h4>
<p class="text-muted mb-4">Click "Enroll" or "Unenroll" to manage your course registrations</p>

{% for data in instructor_data %}
<div class="content-card">
    <h5>{{ data.instructor.name }}</h5>
    <p class="text-muted">Department: {{ data.instructor.id_course }}</p>
    
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Course ID</th>
                <th>Description</th>
                <th>Subjects</th>
                <th>Units</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for course_data in data.courses %}
            <tr>
                <td>{{ course_data.course.id_course }}</td>
                <td>{{ course_data.course.description }}</td>
                <td>{{ course_data.course.subjects }}</td>
                <td>{{ course_data.course.units }}</td>
                <td>
                    {% if course_data.is_enrolled %}
                        <span class="badge bg-success">Enrolled</span>
                    {% else %}
                        <span class="badge bg-secondary">Not Enrolled</span>
                    {% endif %}
                </td>
                <td>
                    <form method="post" action="{% url 'toggle_enrollment' data.instructor.id course_data.course.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm {% if course_data.is_enrolled %}btn-danger{% else %}btn-success{% endif %}">
                            {% if course_data.is_enrolled %}Unenroll{% else %}Enroll{% endif %}
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="text-center">No courses available</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endfor %}
{% endblock %}